{{extend "func_demo_layout.html"}}

{{block sidemenu}}
{{<< sidemenu('FUNCMENU', 'generic', 'list')}}
{{end}}

{{block content_main}}
{{use "ui.rgrid"}}

<query-condition></query-condition>

<rgrid id="grid"></rgrid>

<script>
    var tools = [
      [
        {
          label:'新增',
          icon:'fa fa-plus',
          class:'btn btn-sm btn-primary btn-flat',
          url:'/func/add'
        },
        {
          label:'新增(对话框)',
          class:'btn btn-sm btn-primary btn-flat',
          onClick: function() {
            var options = {
              onSuccess: function(dialog, d) {
                grid.add(d.data)
              }
            }
            dialog('/func/add1', options);
          }
        }
      ]
    ]
    var url = {{$ table.data_url}}
    var cols = {{$ table.table_info['fields_list']}}
    var query = {{$ query_form}}
    riot.mount('rgrid', {
      tools:tools,
      cols:cols,
      url:url,
      query:query,
      indexCol:true,
      height:'auto',
      maxHeight:400,
      remoteSort:true,
      download:true
      <!--onSort:function(sorts){-->
        <!--var _url = get_url(url, {sort:sorts[0].name+'.'+sorts[0].direction})-->
        <!--grid.instance.url = _url-->
        <!--grid.load(_url, function(r){-->
          <!--return r.rows-->
        <!--})-->
      <!--}-->
    })

    var grid = document.getElementById('grid')
</script>
{{end}}
